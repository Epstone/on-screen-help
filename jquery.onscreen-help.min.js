(function(e,q,f){function m(a,c,d){this.element=a;this.options=e.extend({},n,d);this.defaults=n;this.name=i;this.steps=c;this.init()}var k=function(a,c,d,b){this.x=a;this.y=c;this.width=d;this.height=b},s=function(){var a=this;a.b1=a.b2=a.b3=a.b4=f;a.initialize=function(c,d){var b=c.offset(),j=c.width(),g=c.height(),r=e(p).width(),f=e(p).height(),h=b.top,b=b.left;d&&(h+=parseInt(c.css("padding-top"),10),b+=parseInt(c.css("padding-left"),10));var j=b+j,i=h+g;a.b1=new k(0,0,"100%",h);a.b2=new k(j,h, r-j,g);a.b3=new k(0,h+g,"100%",f-i);a.b4=new k(0,h,b,g);return this}},t=function(){var a=this;a.$b1=new l;a.$b2=new l;a.$b3=new l;a.$b4=new l;a.highlight=function(c,d){var b=e(c);if(0===b.length)throw"selector "+c+" is not existing.";b=(new s).initialize(b,d);a.$b1.update(b.b1);a.$b2.update(b.b2);a.$b3.update(b.b3);a.$b4.update(b.b4);e("body,html").animate({scrollTop:b.b1.height-50},1E3)};a.showDescription=function(c){a.$description||(a.$descriptionText=e("<div class='arrow_box' />"),a.$description= e("<div class='arrow_box_outer'></div>").append(a.$descriptionText),e("body").append(a.$description));a.$descriptionText.text(c.description);var d=a.$description.width()/2,b=e(c.selector),c=b.offset().top+b.height()+parseInt(b.css("padding-top"),10),d=b.offset().left+b.width()/2-d+parseInt(b.css("padding-left"),10);a.$description.css({top:c,left:d})}},l=function(){var a=this,c=e("<div class='osh-block'/>");e("body").append(c);a.sizeInfo=f;a.update=function(d){c.css({left:d.x,top:d.y,width:d.width, height:d.height});a.sizeInfo=d}},u=function(){var a=this;a.$buttons=f;a.createToolbarBasic=function(c){e("<div class='osh-toolbar-background' />").appendTo("body");a.$buttons=e("<ul class='osh-button-list' />");var d=e("<a class='left osh-button' href='#'>&lt;</a>"),b=e("<a href='#' class='right osh-button' >&gt;</a>"),j=e("<div class='osh-toolbar'></div>").append([d,b,a.$buttons]);d.click(function(b){b.preventDefault();c.call(a,-1)});b.click(function(b){b.preventDefault();c.call(a,1)});e("body").append(j)}; a.createToolbarButtons=function(c,d){e.each(c,function(b,c){var g=e("<a href='#' class='osh-nav-link' />").text(c.title),f=e("<li />").append(g);c.$link=g;g.click(function(b){b.preventDefault();d.call(a,c)});a.$buttons.append(f)})}},v=function(){var a=this,c,d=[];this.showDescriptionCallback=this.highlightCallback=f;a.initialize=function(a){var c=0;e.each(a,function(a,b){b.title=a;b.index=c;c++;d.push(b)})};a.getSteps=function(){return d};a.activateStep=function(b){b!==c&&(a.highlightCallback.call(a, b.selector,b.addPadding),a.showDescriptionCallback.call(a,b),c&&c.$link.removeClass("active"),c=b,c.$link.addClass("active"))};a.nextPrevStep=function(b){c?(b=c.index+b,b>=d.length?b=0:0>b&&(b=d.length-1),a.activateStep(d[b])):a.activateStep(d[0])}},i="onScreenHelp",p=q.document,n={propertyName:"value"};m.prototype.init=function(){this.$buttons=f;this.highlighter=new t;this.tutorialController=new v;this.tutorialController.initialize(this.steps);this.tutorialController.highlightCallback=this.highlighter.highlight; this.tutorialController.showDescriptionCallback=this.highlighter.showDescription;this.toolbarCreator=new u;this.toolbarCreator.createToolbarBasic(this.tutorialController.nextPrevStep);var a=this.tutorialController.getSteps();this.toolbarCreator.createToolbarButtons(a,this.tutorialController.activateStep)};e.fn[i]=function(a,c){return this.each(function(){e.data(this,"plugin_"+i)||e.data(this,"plugin_"+i,new m(this,a,c))})}})(jQuery,window);